<div class="row">
    <div class="col-sm-offset-1 col-md-10 time-set">
        <h3 class="page-header">请设置时间流程
            <input type="button" class="btn btn-primary fr" ng-disabled="isSetting" value="开启新的困难认定" ng-click="isOrNotStart()">
        </h3>
        <form ng-if="isSetting" name="vm.processForm" novalidate>
            <table class="table table-hover">
                <thead>
                <tr>
                    <th>步骤</th>
                    <th>阶段</th>
                    <th class="w400">设置</th>
                </tr>
                </thead>
                <tbody>
                <tr>
                    <td class="pt15">步骤1</td>
                    <td class="pt15">困难认定申请时间段</td>
                    <td>
                        <p class=" input-group inline-block vertical-middle">
                            <input type="text" class="form-control"
                                   uib-datepicker-popup name="applyStart" placeholder="请选择时间"
                                   ng-model="vm.processTimeList.applyStart" is-open="applyStart"
                                   ng-disabled="vm.processTimeList.applyStart<=vm.now" datepicker-options="vm.applyStartOptions"
                                   readonly ng-click="applyStart = true" required show-button-bar="false"
                                   ng-class="{'border-error':vm.processForm.applyStart.$invalid&&vm.baseSubmit}">
                            <span class="input-group-btn">
                                <button type="button" class="btn btn-default btn-icon" ng-click="applyStart = true">
                                    <i class="glyphicon glyphicon-calendar"></i>
                                </button>
                            </span>
                        </p>
                        &nbsp;&nbsp;~&nbsp;&nbsp;
                        <p  class=" input-group inline-block vertical-middle">
                            <input type="text" class="form-control" uib-datepicker-popup name="applyEnd"
                                   placeholder="请选择时间"
                                   ng-model="vm.processTimeList.applyEnd" is-open="applyEnd"
                                   datepicker-options="vm.applyEndOptions"
                                   readonly ng-click="applyEnd = true" required show-button-bar="false"
                                   ng-class="{'border-error':vm.processForm.applyEnd.$invalid&&vm.baseSubmit}">
                            <span class="input-group-btn">
                                <button type="button" class="btn btn-default btn-icon" ng-click="applyEnd = true">
                                    <i class="glyphicon glyphicon-calendar"></i>
                                </button>
                            </span>
                        </p>
                    </td>
                </tr>
                <tr>
                    <td class="pt15">步骤2</td>
                    <td class="pt15">学年设置</td>
                    <td>
                        <p ng-if="!isSetting || vm.newSetting" class=" input-group inline-block vertical-middle">
                        <select class=" gradeSelect form-control"
                                ng-options="grade.schoolYearName for grade in vm.gradeList track by grade.schoolYearId"
                                ng-model="vm.gradeChoosed">
                        </select>
                        </p>
                        <p ng-if="isSetting && !vm.newSetting" class=" input-group inline-block vertical-middle">
                            <span>{{vm.processTimeList.schoolYearName}}</span>
                        </p>
                    </td>
                </tr>
                </tbody>
            </table>
        </form>
    </div>
</div>
<div ng-if="isSetting" class="text-center pb20">
    <input type="button" value="保存设置" ng-click="updateTime()" class="btn btn-primary h40 w180">
</div>



<div class="modal fade" id="isOrNotStart" tabindex="-1" role="dialog" aria-labelledby="addGrantsModal">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span
                        aria-hidden="true">&times;</span></button>
                <h4 class="modal-title" id="addGrantsModal">是否开启新的困难认定</h4>
            </div>
            <div class="modal-body ">
                新的困难认定开启后，之前困难认定的时间配置、评审内容等将被清空，是否确定开启新的困难认定?
            </div>
            <div class="modal-footer tc">
                <button type="button" data-dismiss="modal" aria-label="Close" class="btn btn-default">取消
                </button>
                <button type="button" ng-click="startNew()" class="btn btn-primary">确定</button>
            </div>
        </div>
    </div>
</div>